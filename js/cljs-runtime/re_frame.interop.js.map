{"version":3,"sources":["re_frame/interop.cljs"],"mappings":";;;AAOA,AAAKA,6BAAUC;AAEf,+BAAA,AAAAC,6CAAA,AAAAC,gCAAA,5GAAKC;AAEL,AAAKC,gCAAaC;AAMlB;;;AAAcC,wCAA4CC;AAE1D,yBAAA,zBAAMC,0DAAOC;AAAb,AACE,OAACC,gDAAkBD;;AAErB,gCAAA,hCAAME,wEAAQF;AAAd,AACE,GAAA,GAAA,MAAA,LAA6CA;AAA7C,GAAA,EAAA,WAAA,CAAAG,gCAAA,AAA6CH;AAA7C;;AAAA,GAAA,EAAA,AAA6CA;AAA7C,OAAAI,kCAAYC,4BAAiCL;;AAA7C;;;;AAAA,OAAAI,kCAAYC,4BAAiCL;;;AAE/C,gCAAA,hCAAMM,wEAAQN;AAAd,AACE,GAAA,GAAA,MAAA,LAAmBA;AAAnB,GAAA,EAAA,CAAA,wCAAA,cAAA,CAAAG,gCAAA,vFAAmBH,uFAAAA;AAAnB;;AAAA,GAAA,EAAA,AAAmBA;AAAnB,OAAAI,kCAAYG,iBAAOP;;AAAnB;;;;AAAA,OAAAI,kCAAYG,iBAAOP;;;AAGrB,iCAAA,jCAAMQ,0EAAeC;AAArB,AACE,OAACC,4BAA4BD;;AAE/B,wCAAA,xCAAME,wFAAiBC,QAAQH;AAA/B,AACE,OAACI,mCAA8BD,QAAQH;;AAEzC,iCAAA,jCAAMK,0EAAUF;AAAhB,AACC,OAACG,4BAAuBH;;AAEzB,qCAAA,rCAAMI,kFAAcP,EAAEQ;AAAtB,AACE,OAACC,WAAcT,EAAEQ;;AAEnB,uBAAA,vBAAME;AAAN,AACE,GAAI,EACC,QAAAC,kCACA,QAAAA,wCAAAC;AACH,OAACA;;AACD,OAACC;;;AAEL;;;;8BAAA,9BAAMC,oEAGHC;AAHH,AAIE,GAAM,EAAA,GAAA,iBAAA,SAAA,EAAA,EAAA,WAAA,CAAArB,gCAAA,8CAAA,KAAA,OAAA,nIAA8CqB,yEAAAA;AAApD,AACE,QAAK,iBAAAC,cAAOE;IAAPD,cAAiBF;AAAjB,AAAA,oBAAA,CAAAC,4CAAAA,8DAAAC,eAAAD,0CAAAC,7EACEE,yDAAAA;AADF;;AAAA,oBAAA,CAAAH,4CAAAA,gEAAAC,eAAAD,4CAAAC,jFAEEG,2DAAAA;AAFF;;AAAA,oBAAA,CAAAJ,4CAAAA,iEAAAC,eAAAD,6CAAAC,nFAGEI,4DAAAA;AAHF;;AAAA,oBAAA,CAAAL,4CAAAA,8DAAAC,eAAAD,0CAAAC,7EAIEK,yDAAAA;AAJF;;AAAA;;;;;iDAMA,AAACC,eAAKR;;AAPb;;;AAWF,+CAAA,/CAAeS;AAEf,iCAAA,jCAAMC,0EAAezB;AAArB,AACE,OAAC0B,4DACA;AAAA,AACE,IAAAC,8CAAUH;IAAVI,8CAAA;AAAA,AAAA,gDAAAA,/CAAUJ;;AAAV,IAAA,AACE,QAACxB,kCAAAA,oCAAAA;UADH,AAAA,gDAAA2B,/CAAUH;;;AAGf,IAAMK,qBAAa,AAAO,AAAgBC,qDAChBA;AAD1B,AAEE,mDAAA,lDAAM,AAAgBA;AAAtB,AACO,OAACL,+BAAcI;;AAExB,IAAME,qBAAaC;AAAnB,AACE,CAAMA,qCAAmC,WAAUC;AAAV,AACE,oBAAIT;AACF,OAAcS;;AACd,QAACF,mDAAAA,sDAAAA,LAAaE,kCAAAA","names":["re-frame.interop/next-tick","reagent.impl.batching/do-before-flush","cljs.core.into","cljs.core/PersistentQueue","re-frame.interop/empty-queue","re-frame.interop/after-render","reagent.core/after-render","re-frame.interop/debug-enabled?","goog/DEBUG","re-frame.interop/ratom","x","reagent.core.atom","re-frame.interop/ratom?","cljs.core/PROTOCOL_SENTINEL","cljs.core/native-satisfies?","reagent.ratom/IReactiveAtom","re-frame.interop/deref?","cljs.core/IDeref","re-frame.interop/make-reaction","f","reagent.ratom/make-reaction","re-frame.interop/add-on-dispose!","a-ratom","reagent.ratom/add-on-dispose!","re-frame.interop/dispose!","reagent.ratom/dispose!","re-frame.interop/set-timeout!","ms","js/setTimeout","re-frame.interop/now","js/performance","js/performance.now","js/Date.now","re-frame.interop/reagent-id","reactive-val","pred__58654","expr__58655","cljs.core/instance?","reagent.ratom/RAtom","reagent.ratom/RCursor","reagent.ratom/Reaction","reagent.ratom/Track","cljs.core/hash","re-frame.interop/*in-batch?*","re-frame.interop/batch-updates","js/module$node_modules$react_dom$index.unstable_batchedUpdates","*in-batch?*-orig-val__58660","*in-batch?*-temp-val__58662","flush-queues","reagent.impl.batching/render-queue","queue-render","reagent.impl.batching/queue-render","c"],"sourcesContent":["(ns re-frame.interop\r\n  (:require [reagent.core]\r\n            [reagent.impl.batching]\r\n            [reagent.ratom]\r\n            [react :as react]\r\n            [react-dom :as react-dom]))\r\n\r\n(def next-tick reagent.impl.batching/do-before-flush)\r\n\r\n(def empty-queue #queue [])\r\n\r\n(def after-render reagent.core/after-render)\r\n\r\n;; Make sure the Google Closure compiler sees this as a boolean constant,\r\n;; otherwise Dead Code Elimination won't happen in `:advanced` builds.\r\n;; Type hints have been liberally sprinkled.\r\n;; https://developers.google.com/closure/compiler/docs/js-for-compiler\r\n(def ^boolean debug-enabled? \"@define {boolean}\" ^boolean goog/DEBUG)\r\n\r\n(defn ratom [x]\r\n  (reagent.core/atom x))\r\n\r\n(defn ratom? [x]\r\n  (satisfies? reagent.ratom/IReactiveAtom ^clj x))\r\n\r\n(defn deref? [x]\r\n  (satisfies? IDeref x))\r\n\r\n\r\n(defn make-reaction [f]\r\n  (reagent.ratom/make-reaction f))\r\n\r\n(defn add-on-dispose! [a-ratom f]\r\n  (reagent.ratom/add-on-dispose! a-ratom f))\r\n\r\n(defn dispose! [a-ratom]\r\n\t(reagent.ratom/dispose! a-ratom))\r\n\r\n(defn set-timeout! [f ms]\r\n  (js/setTimeout f ms))\r\n\r\n(defn now []\r\n  (if (and\r\n       (exists? js/performance)\r\n       (exists? js/performance.now))\r\n    (js/performance.now)\r\n    (js/Date.now)))\r\n\r\n(defn reagent-id\r\n  \"Produces an id for reactive Reagent values\r\n  e.g. reactions, ratoms, cursors.\"\r\n  [reactive-val]\r\n  (when (implements? reagent.ratom/IReactiveAtom ^clj reactive-val)\r\n    (str (condp instance? reactive-val\r\n           reagent.ratom/RAtom \"ra\"\r\n           reagent.ratom/RCursor \"rc\"\r\n           reagent.ratom/Reaction \"rx\"\r\n           reagent.ratom/Track \"tr\"\r\n           \"other\")\r\n         (hash reactive-val))))\r\n\r\n;; Make reagent benefit from batched updates\r\n\r\n(def ^:dynamic *in-batch?* false)\r\n\r\n(defn batch-updates [f]\r\n  (react-dom/unstable_batchedUpdates\r\n   (fn []\r\n     (binding [*in-batch?* true]\r\n       (f)))))\r\n\r\n(let [flush-queues (.bind (.-flush-queues reagent.impl.batching/render-queue)\r\n                          reagent.impl.batching/render-queue)]\r\n  (set! (.-flush-queues reagent.impl.batching/render-queue)\r\n        #(batch-updates flush-queues)))\r\n\r\n(let [queue-render reagent.impl.batching/queue-render]\r\n  (set! reagent.impl.batching/queue-render (fn [^clj c]\r\n                                             (if *in-batch?*\r\n                                               (.forceUpdate c)\r\n                                               (queue-render c)))))\r\n"]}
{"version":3,"sources":["nextjournal/viewer/markdown.cljs"],"mappings":"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","names":["var_args","args__4835__auto__","len__4829__auto__","i__4830__auto__","argseq__4836__auto__","cljs.core/IndexedSeq","nextjournal.viewer.markdown/inspect*","seq60634","self__4817__auto__","cljs.core/seq","args","i","js/nextjournal","js/nextjournal.viewer","js/nextjournal.viewer.inspect","cljs.core/Var","nextjournal.viewer/inspect","cljs.core.apply","nextjournal.viewer.markdown/eval-form*","f","ef","js/nextjournal.viewer.notebook","js/nextjournal.viewer.notebook.eval-form","nextjournal.viewer.notebook/eval-form","nextjournal.viewer.markdown/sidenote-click-handler","e","nextjournal.viewer.markdown/code-viewer","node","nextjournal.markdown.transform/->text","nextjournal.viewer.markdown/default-renderers","cljs.core.assoc","nextjournal.markdown.transform/default-hiccup-renderers","p__60651","map__60652","cljs.core/--destructure-map","cljs.core.get","ctx","doc","sidenotes?","nextjournal.markdown.transform/into-markup","_ctx","p__60654","map__60655","attrs","nextjournal.viewer.katex.to_html_string","nextjournal.viewer.markdown/viewer","value","nextjournal.markdown.__GT_hiccup","nextjournal.devcards/register-devcard*","markdown","cljs.core/deref","cljs.core.partial","p__60697","map__60698","_","language","cljs.core._EQ_","cljs.reader.read_string","toc","nextjournal.markdown.transform.__GT_hiccup","nextjournal.markdown/parse","cljs.core/first","cljs.core.dissoc","md"],"sourcesContent":["(ns nextjournal.viewer.markdown\r\n  (:require [nextjournal.markdown :as md]\r\n            [nextjournal.markdown.transform :as md.transform]\r\n            [nextjournal.viewer.katex :as katex]\r\n            [nextjournal.devcards :as dc]))\r\n\r\n;; FIXME: inspect should be passed down to viewers via ctx or something\r\n(defn inspect* [& args]\r\n  (let [i (resolve 'nextjournal.viewer/inspect)]\r\n    (apply i args)))\r\n\r\n(defn eval-form* [f]\r\n  (let [ef (resolve 'nextjournal.viewer.notebook/eval-form)]\r\n    (ef f)))\r\n\r\n(defn sidenote-click-handler [^js e]\r\n  (when (.. e -target -classList (contains \"sidenote-ref\"))\r\n    (.. e -target -classList (toggle \"expanded\"))))\r\n\r\n(defn code-viewer [node]\r\n  [:div.viewer-code.not-prose\r\n   [inspect* {:nextjournal/viewer :code\r\n              :nextjournal/value (md.transform/->text node)}]])\r\n\r\n(def default-renderers\r\n  (assoc md.transform/default-hiccup-renderers\r\n         :doc (fn [ctx {:as doc :keys [sidenotes?]}]\r\n                (md.transform/into-markup\r\n                 [:div\r\n                  {:class (when sidenotes? \"contains-sidenotes\")\r\n                   :on-click sidenote-click-handler}]\r\n                 ctx\r\n                 doc))\r\n         :code (fn [_ctx node] (code-viewer node))\r\n         :todo-item (fn [ctx {:as node :keys [attrs]}]\r\n                      (md.transform/into-markup [:li [:input {:type \"checkbox\" :default-checked (:checked attrs)}]] ctx node))\r\n                                                                               ;; \u2b06 defaultChecked only makes senst in react/reagent\r\n         :formula (fn [_ctx node]\r\n                    [:span {:dangerouslySetInnerHTML {:__html (katex/to-html-string (md.transform/->text node))}}])\r\n         :block-formula (fn [_ctx node]\r\n                          [:div {:dangerouslySetInnerHTML {:__html (katex/to-html-string (md.transform/->text node) #js {:displayMode true})}}])))\r\n\r\n(defn viewer [value]\r\n  ;; TODO: allow to pass \"modes\" with different sets of overrides\r\n  (when value\r\n    {:nextjournal/value (md/->hiccup default-renderers value)\r\n     :nextjournal/viewer :hiccup}))\r\n\r\n(dc/defcard formulas\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer \"\r\nInline $\\\\phi_\\\\alpha$ and block\r\n\r\n$$\\\\int_a^b f(t) dt$$\r\n\r\nformulas\")]])\r\n\r\n(dc/defcard numbered-lists\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer \"\r\n1. Lorem ipsum dolor sit amet\r\n2. Consectetur adipiscing elit\r\n3. Integer molestie lorem at massa\")]])\r\n\r\n(dc/defcard numbered-lists-offset\r\n  \"List should be able to start from an offset, e.g. 2., 3., 4. instead of 1., 2., 3., ...\"\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer \"\r\n2. Lorem ipsum dolor sit amet\r\n3. Consectetur adipiscing elit\r\n4. Integer molestie lorem at massa\")]])\r\n\r\n(dc/defcard numbered-lists-non-sequential\r\n  \"Non-sequential numbered test, e.g. using the same counter over and over again, should result in sequentially numbered lists.\"\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer \"\r\n1. Lorem ipsum dolor sit amet\r\n1. Consectetur adipiscing elit\r\n1. Integer molestie lorem at massa\")]])\r\n\r\n(dc/defcard internal-links\r\n  \"Non-sequential numbered test, e.g. using the same counter over and over again, should result in sequentially numbered lists.\"\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer \"# Internal Links\r\n- [x] play well with our todo list plugin\r\n- [x] an internal link looks like this [[wikistyle]]\r\n- [x] play well with [[TOC]] marker\")]])\r\n\r\n(dc/defcard default-markdown\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer \"# Markdown Default Rendering\r\n## Sidenotes\r\n\r\nOne of the most distinctive features of Tufte\u2019s style is his extensive use of sidenotes.\r\nSidenotes[^1] are like footnotes, except they don\u2019t force the reader to jump their eye to\r\nthe bottom of the page, but instead display off to the side in the margin.[^longnote]\r\n\r\n[^1]: Here\u2019s a sidenote.\r\n\r\n[^longnote]: And here is another one with more text that wraps over multiple lines.\r\n\r\nSidenotes are a great example of the web not being like print. On sufficiently large viewports,\r\nTufte CSS uses the margin for sidenotes, margin notes, and small figures. On smaller viewports,\r\nelements that would go in the margin are hidden until the user toggles them into view.\r\n\r\nThe goal is to present related but not necessary information such as asides or citations as\r\nclose as possible to the text that references them. At the same time, this secondary information\r\nshould stay out of the way of the eye, not interfering with the progression of ideas in the\r\nmain text.\r\n\r\n## Tags\r\n\r\nYou might want to #hashtag this document for #good #fun123.\r\n\r\n## Todos\r\n\r\n- [x] Checked\r\n- [x] Unchecked\r\n  - [ ] Nested unchecked\r\n\r\n## Code\r\n\r\n```clj\r\n(like what)\r\n```\r\n\r\n### Block Formulas\r\n\r\n$$\\\\int_{\\\\omega} \\\\phi d\\\\omega$$\r\n\r\n### Formulas inside tables\r\n\r\n| Syntax |  JVM                     | JavaScript                                    |\r\n|:-------|:------------------------:|----------------------------------------------:|\r\n| foo    |  Local_Date_             | goog.date.Date                                |\r\n| bar    |  java.time.LocalDateTime | $\\\\bigoplus_{\\\\alpha < \\\\omega}\\\\phi_\\\\alpha$ |\r\n\")]])\r\n\r\n(dc/defcard dark-mode\r\n  \"Provide custom styles to e.g. support dark mode.\"\r\n  [markdown]\r\n  [inspect* {:nextjournal/viewer :hiccup\r\n             :nextjournal/value (->> @markdown\r\n                                     (md/->hiccup\r\n                                      (assoc default-renderers\r\n                                             :doc (partial md.transform/into-markup [:div.viewer-markdown.dark:bg-gray-900.dark:text-white.rounded.shadow-sm.p-4]))))}]\r\n  {::dc/state \"### Dark Mode Support\r\nHere is some code that provides a custom wrapper with styles to e.g. set the text color\r\nand background if dark mode is enabled in your system.\"})\r\n\r\n(dc/defcard custom-code-eval\r\n  [markdown]\r\n  [:div.viewer-markdown\r\n   [inspect* {:nextjournal/viewer :hiccup\r\n              :nextjournal/value (->> @markdown\r\n                                      (md/->hiccup\r\n                                       (assoc default-renderers\r\n                                              :code (fn [_ {:as node :keys [language]}]\r\n                                                      [:div\r\n                                                       (code-viewer node)\r\n                                                       (when (= \"cljs\" language)\r\n                                                         [:div.viewer-result.mt-3\r\n                                                          [inspect* (eval-form* (cljs.reader/read-string (md.transform/->text node)))]])]))))}]]\r\n  {::dc/state \"# Custom `.cljs` Code Eval\r\n\r\nOverrides the default `:code` renderer to add an extra sci pass for fenced code blocks with a `cljs` language info\r\n\r\n```cljs\r\n{:foo (reduce + 0 (range 10)) }\r\n```\r\n\r\nCan show what markdown parser actually do\r\n\r\n```cljs\r\n(nextjournal.markdown/parse \\\"# \ud83d\udc4b\ud83c\udffb Hello markdown parsing\r\n- [x] with\r\n- [ ] some\r\n- [ ] fun\r\n\\\")\r\n\r\n```\r\nsame for hiccup transform\r\n```cljs\r\n(nextjournal.markdown/->hiccup \\\"# \ud83d\udc4b\ud83c\udffb Hello markdown parsing\r\n- [x] with\r\n- [ ] some\r\n- [ ] fun\r\n\\\")\r\n\r\n```\r\n\r\ncode in other languages than clojurescript is just inert:\r\n\r\n```python\r\nimport sys\r\nsys.version\r\n```\r\n\r\n\"})\r\n\r\n(dc/defcard table-of-contents\r\n  [markdown]\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer @markdown)]]\r\n  {::dc/state \"# Built-in Table of Contents\r\n\r\n[[TOC]]\r\n\r\n## Section 1\r\n\r\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\r\n\r\n### Section 1.1\r\n\r\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\r\n\r\n## Section 2\r\n\r\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\r\n\r\n### Section 2.1\r\n\r\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\r\n\r\n#### Section 2.1.1\r\n\r\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\r\n\r\n### Section 2.2\r\n\r\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\r\n\r\n## Section 3\r\n\r\nSed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.\r\n\"})\r\n\r\n(dc/defcard toc-standalone\r\n  \"Shows how to render the TOC of a document\"\r\n  [toc]\r\n  [:div.viewer-markdown\r\n   [inspect* {:nextjournal/viewer :hiccup\r\n              :nextjournal/value (md.transform/->hiccup @toc)}]]\r\n  {::dc/state (-> \"# My Document\r\n## Section 1\r\n### Section 1.1\r\n## Section 2\r\n### Section 2.1\r\n\" md/parse :toc)})\r\n\r\n(dc/defcard toc-standalone-dropping-title\r\n  \"Shows how to drop top h1 entry from TOC\"\r\n  [toc]\r\n  [:div.viewer-markdown\r\n   [inspect* {:nextjournal/viewer :hiccup\r\n              :nextjournal/value (md.transform/->hiccup @toc)}]]\r\n  {::dc/state (-> \"# My Document\r\n## Section 1\r\n### Section 1.1\r\n## Section 2\r\n### Section 2.1\r\n\" md/parse :toc :children first (dissoc :content))})\r\n\r\n(dc/defcard reference\r\n  [markdown]\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer @markdown)]]\r\n  {::dc/state \"# Referenz\r\n\r\n## Abs\u00e4tze\r\n\r\nNormaler Text wird als Absatz interpretiert. Ein doppelter Zeilenabstand beginnt\r\neinen neuen Absatz.\r\n\r\n## Formatierung\r\n\r\n* `**fett**` wird zu **fett**\r\n* `_kursiv_` wird zu _kursiv_\r\n* `~~durchgestrichen~~` wird zu ~~durchgestrichen~~\r\n* `[Linktext](https://nextjournal.com/)` wird zu [Linktext](https://nextjournal.com/)\r\n\r\n## \u00dcberschriften\r\n\r\n\u00dcberschriften beginnen mit `#`. Mehrere aufeinanderfolgende `#`\r\ndefinieren das Level der \u00dcberschrift.\r\n\r\n    # \u00dcberschrift 1\r\n    ## \u00dcberschrift 2\r\n    ### \u00dcberschrift 3\r\n    #### \u00dcberschrift 4\r\n\r\n## Listen\r\n\r\n### Aufz\u00e4hlungen\r\n\r\nNormale Aufz\u00e4hlungen beginnen mit einem `*` und k\u00f6nnen verschachtelt sein.\r\n\r\n    * K\u00fchlschrank\r\n        * Butter\r\n        * Eier\r\n        * Milch\r\n    * Vorratsschrank\r\n        * Brot\r\n        * Backpapier\r\n        * Alufolie\r\n\r\nwird zu\r\n\r\n* K\u00fchlschrank\r\n    * Butter\r\n    * Eier\r\n    * Milch\r\n* Vorratsschrank\r\n    * Brot\r\n    * Backpapier\r\n    * Alufolie\r\n\r\n### Nummerierte Aufz\u00e4hlungen\r\n\r\nNummerierte Aufz\u00e4hlungen beginnen mit `1.` und k\u00f6nnen ebenfalls verschachtelt sein.\r\nVerschachtelte Aufz\u00e4hlungen beginnen wieder mit `1.` (anstelle z.B. `1.1.`) und nehmen automatisch die\r\n\u00fcbergeordneten Indizes mit.\r\n\r\n    1. Gr\u00fcnpflanzen\r\n        1. Charophyten\r\n        2. Chlorophyten\r\n    2. Landpflanzen\r\n        1. Lebermoose\r\n        2. Laubmoose\r\n        3. Hornmoose\r\n\r\nwird zu\r\n\r\n1. Gr\u00fcnpflanzen\r\n   1. Charophyten\r\n   2. Chlorophyten\r\n2. Landpflanzen\r\n   1. Lebermoose\r\n   2. Laubmoose\r\n   3. Hornmoose\r\n\r\n### Todo Listen\r\n\r\nTodo Listen beginnen mit `* [ ]` oder `* [x]` wobei das `x` markiert ob\r\ndas Todo erledigt ist. Todo Listen k\u00f6nnen ebenfalls verschachtelt sein.\r\n\r\n    * [ ] Lebensmittel\r\n        * [x] Butter\r\n        * [ ] Eier\r\n        * [ ] Milch\r\n    * [x] Werkstatt\r\n        * [x] Schrauben Torx M6\r\n        * [x] Torx Bitsatz\r\n\r\nwird zu\r\n\r\n* [ ] Lebensmittel\r\n    * [x] Butter\r\n    * [ ] Eier\r\n    * [ ] Milch\r\n* [x] Werkstatt\r\n    * [x] Schrauben Torx M6\r\n    * [x] Torx Bitsatz\r\n\r\n## Tabellen\r\n\r\nDoppelpunkte k\u00f6nnen verwendet werden um den Text in Spalten links,\r\nrechts oder zentriert auszurichten.\r\n\r\n\r\n    | Spalte 1     | Spalte 2            | Spalte 3 |\r\n    | ------------ |:-------------------:| --------:|\r\n    | Spalte 1 ist | links ausgerichtet  |   1600 \u20ac |\r\n    | Spalte 2 ist | zentriert           |     12 \u20ac |\r\n    | Spalte 3 ist | rechts ausgerichtet |      1 \u20ac |\r\n\r\nwird zu\r\n\r\n| Spalte 1     | Spalte 2            | Spalte 3 |\r\n| ------------ |:-------------------:| --------:|\r\n| Spalte 1 ist | links ausgerichtet  |   1600 \u20ac |\r\n| Spalte 2 ist | zentriert           |     12 \u20ac |\r\n| Spalte 3 ist | rechts ausgerichtet |      1 \u20ac |\r\n\r\n## Bilder\r\n\r\n    ![ARS Altmann Waggon](https://www.ars-altmann.de/wp-content/uploads/2017/12/Schiene2.jpg)\r\n\r\nwird zu\r\n\r\n![ARS Altmann Waggon](https://www.ars-altmann.de/wp-content/uploads/2017/12/Schiene2.jpg)\r\n\r\n## Zitate\r\n\r\n    > \u201cThe purpose of computation is insight, not numbers.\u201d\r\n    >\r\n    > \u2015 Richard Hamming\r\n\r\nwird zu\r\n\r\n> \u201cThe purpose of computation is insight, not numbers.\u201d\r\n>\r\n> \u2015 Richard Hamming\r\n\r\n## Trennlinien\r\n\r\nVerschiedene Sektionen k\u00f6nnen durch Trennlinien verdeutlicht werden.\r\n`---` produziert eine Linie \u00fcber die volle Breite des Dokuments.\r\n\r\n    #### Sektion 1\r\n\r\n    Hier ist ein Absatz zur Sektion 1.\r\n\r\n    ---\r\n\r\n    #### Sektion 2\r\n\r\n    Hier ist ein Absatz zur Sektion 2.\r\n\r\nwird zu\r\n\r\n#### Sektion 1\r\n\r\nHier ist ein Absatz zur Sektion 1.\r\n\r\n---\r\n\r\n#### Sektion 2\r\n\r\nHier ist ein Absatz zur Sektion 2.\r\n\r\n## Inhaltsverzeichnis\r\n\r\nEin Inhaltsverzeichnis \u00fcber alle \u00dcberschriften kann an jeder beliebigen\r\nStelle mit `[[toc]]` eingef\u00fcgt werden.\r\n\r\n    [[toc]]\r\n\r\nwird zu\r\n\r\n[[toc]]\r\n\"})\r\n\r\n(dc/defcard tables\r\n  \"Pipes in tables need to be escaped\"\r\n  [md]\r\n  [:div.viewer-markdown\r\n   [inspect* (viewer @md)]]\r\n  {::dc/state \"# Tables\r\n\r\n | Heading 1  | Heading 2\r\n | ---------- | ---------\r\n | Cell 1     | **Cell 2**\r\n | `Cell\\\\|3` | _Cell 4_\r\n\"})\r\n\r\n(dc/defcard tight-lists\r\n  [md]\r\n  [:div.viewer-markdown\r\n   {:style {:max-width 500}}\r\n   [inspect* (viewer @md)]]\r\n  {::dc/state \"### Loose Lists\r\n\r\nLists with more than one paragraph per list item\r\n\r\n- List Item 1\r\n\r\n  with a paragraph inside that should have proper paragraph-like margins around it\r\n\r\n  and another paragraph inside that should have proper paragraph-like margins around it\r\n- List Item 2\r\n\r\n### Tight lists\r\n\r\nText in list items is not wrapped in a `<p>`\r\n\r\n- List Item 1\r\n  - List Item 1.1\r\n- List Item 2\r\n  - List item 2.1\r\n  - List item 2.2\r\n\r\nSee [Commonmark Spec](https://spec.commonmark.org/0.30/#loose)\r\n  \"})\r\n"]}